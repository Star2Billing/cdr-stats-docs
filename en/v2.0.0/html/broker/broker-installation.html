<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Broker Installation &mdash; CDR-Stats 2.0.0RC1 documentation</title>
    
    <link rel="stylesheet" href="../_static/cdr-stats.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0RC1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CDR-Stats 2.0.0RC1 documentation" href="../index.html" />
    <link rel="up" title="Installation" href="../installation.html" />
    <link rel="next" title="Celery Installation" href="../celery/celery-installation.html" />
    <link rel="prev" title="Installation with FreeSWITCH" href="../installation/installation-freeswitch.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../celery/celery-installation.html" title="Celery Installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../installation/installation-freeswitch.html" title="Installation with FreeSWITCH"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CDR-Stats 2.0.0RC1 documentation</a> &raquo;</li>
          <li><a href="../installation.html" accesskey="U">Installation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            

    <div class="section" id="broker-installation">
<span id="id1"></span><h1>Broker Installation<a class="headerlink" href="#broker-installation" title="Permalink to this headline">¶</a></h1>
<p>This document describes the installation of two different Brokers. One is <tt class="docutils literal"><span class="pre">Redis</span></tt>
and second is <tt class="docutils literal"><span class="pre">Rabbitmq</span></tt>. You can install either to work with CDR-Stats, although
CDR-Stats automated install script installs Redis.</p>
<div class="section" id="redis">
<span id="broker-redis"></span><h2>Redis<a class="headerlink" href="#redis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="download-source">
<h3>Download Source<a class="headerlink" href="#download-source" title="Permalink to this headline">¶</a></h3>
<p>Download : <a class="reference external" href="https://launchpad.net/ubuntu/maverick/amd64/redis-server/2:2.0.0~rc2-1">redis-server_2.0.0~rc2-1_amd64.deb</a>.</p>
</div>
<div class="section" id="to-install-redis-server">
<h3>To install Redis-Server<a class="headerlink" href="#to-install-redis-server" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ sudo dpkg -i redis-server_2.0.0~rc2-1_amd64.deb</pre>
</div>
<p>or you can use apt-get</p>
<div class="highlight-python"><pre>$ apt-get install redis-server</pre>
</div>
</div>
<div class="section" id="running-server">
<h3>Running Server<a class="headerlink" href="#running-server" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ redis-server</pre>
</div>
</div>
</div>
<div class="section" id="rabbitmq">
<span id="broker-rabbitmq"></span><h2>Rabbitmq<a class="headerlink" href="#rabbitmq" title="Permalink to this headline">¶</a></h2>
<p>RabbitMQ is a complex and sophisticated product.  If you don&#8217;t need this
level of robustness, then you might want to take a look at Redis - it
installs easily, runs relatively lean, and can be monitored and
maintained without a lot of fuss.</p>
<p>See <a class="reference external" href="http://www.rabbitmq.com/install.html">Installing RabbitMQ</a> over at RabbitMQ&#8217;s website.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you&#8217;re getting <cite>nodedown</cite> errors after installing and using
<strong class="program">rabbitmqctl</strong> then this blog post can help you identify
the source of the problem:</p>
<blockquote class="last">
<div><a class="reference external" href="http://somic.org/2009/02/19/on-rabbitmqctl-and-badrpcnodedown/">http://somic.org/2009/02/19/on-rabbitmqctl-and-badrpcnodedown/</a></div></blockquote>
</div>
<div class="section" id="id2">
<h3>Download Source<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.rabbitmq.com/server.html">http://www.rabbitmq.com/server.html</a></p>
</div>
<div class="section" id="debian-apt-repository">
<h3>Debian APT repository<a class="headerlink" href="#debian-apt-repository" title="Permalink to this headline">¶</a></h3>
<p>To make use of the RabbitMQ APT repository,</p>
<p>1. Add the following line to your /etc/apt/sources.list</p>
<div class="highlight-python"><pre>deb http://www.rabbitmq.com/debian/ testing main</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The word <strong>testing</strong> in the above line refers to the state of the release of RabbitMQ,
not any particular Debian distribution. You can use it with Debian stable, testing or unstable,
as well as with Ubuntu. In the future there will be a stable release of RabbitMQ in the
repository.</p>
</div>
<ol class="arabic simple" start="2">
<li>(optional) To avoid warnings about unsigned packages, add RabbitMQ&#8217;s public key to
your trusted key list using apt-key(8)</li>
</ol>
<div class="highlight-python"><pre>$ wget http://www.rabbitmq.com/rabbitmq-signing-key-public.asc

$ sudo apt-key add rabbitmq-signing-key-public.asc</pre>
</div>
<ol class="arabic simple" start="3">
<li>Run apt-get update.</li>
</ol>
<p>4. Install packages as usual; for instance,</p>
<div class="highlight-python"><pre>$ sudo apt-get install rabbitmq-server</pre>
</div>
</div>
<div class="section" id="setting-up-rabbitmq">
<span id="rabbitmq-configuration"></span><h3>Setting up RabbitMQ<a class="headerlink" href="#setting-up-rabbitmq" title="Permalink to this headline">¶</a></h3>
<p>To use celery we need to create a RabbitMQ user, a virtual host and
allow that user access to that virtual host:</p>
<div class="highlight-python"><pre>$ rabbitmqctl add_user myuser mypassword

$ rabbitmqctl add_vhost myvhost

$ rabbitmqctl set_permissions -p myvhost myuser ".*" ".*" ".*"</pre>
</div>
<p>See the RabbitMQ <a class="reference external" href="http://www.rabbitmq.com/admin-guide.html">Admin Guide</a> for more information about <a class="reference external" href="http://www.rabbitmq.com/admin-guide.html#access-control">access control</a>.</p>
</div>
<div class="section" id="starting-stopping-the-rabbitmq-server">
<span id="rabbitmq-start-stop"></span><h3>Starting/Stopping the RabbitMQ server<a class="headerlink" href="#starting-stopping-the-rabbitmq-server" title="Permalink to this headline">¶</a></h3>
<p>To start the server:</p>
<div class="highlight-python"><pre>$ sudo rabbitmq-server</pre>
</div>
<p>you can also run it in the background by adding the <em class="xref std std-option">-detached</em> option
(note: only one dash):</p>
<div class="highlight-python"><pre>$ sudo rabbitmq-server -detached</pre>
</div>
<p>Never use <strong class="program">kill</strong> to stop the RabbitMQ server, but rather use the
<strong class="program">rabbitmqctl</strong> command:</p>
<div class="highlight-python"><pre>$ sudo rabbitmqctl stop</pre>
</div>
<p>When the server is running, continue reading <a class="reference internal" href="#setting-up-rabbitmq">Setting up RabbitMQ</a>.</p>
</div>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="../index.html">
  <img class="logo" src="https://github.com/Star2Billing/cdr-stats/raw/master/cdr_stats/resources/images/cdr-stats-logo-180.png" alt="Logo"/>
</a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="../installation/installation-freeswitch.html"
                        title="previous chapter">Installation with FreeSWITCH</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../celery/celery-installation.html"
                        title="next chapter">Celery Installation</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../celery/celery-installation.html" title="Celery Installation"
             >next</a> |</li>
        <li class="right" >
          <a href="../installation/installation-freeswitch.html" title="Installation with FreeSWITCH"
             >previous</a> |</li>
        <li><a href="../index.html">CDR-Stats 2.0.0RC1 documentation</a> &raquo;</li>
          <li><a href="../installation.html" >Installation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2012, Arezqui Belaid &lt;info@star2billing.com&gt;.
    </div>
  </body>
</html>